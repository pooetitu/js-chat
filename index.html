<!DOCTYPE html>
<html>
   <head>
     <title>WebRTC Simple Video-Chat</title>
   </head>
   <body>
     <form id="form">
       <input id="text" type="text"/>
       <button id="submit">send</button>
     </form>
     <script>window.addEventListener("load", pageReady);
     var exampleSocket;
      function pageReady() {
        exampleSocket = new WebSocket("ws://localhost:3000", "protocolOne");
          document.getElementById("submit").addEventListener("click",(e)=>{
            e.preventDefault();
            sendText();
          });
      };
      function sendText() {
      // Création d'un objet msg qui contient les données 
      // dont le serveur a besoin pour traiter le message
      var msg = {
        type: "message",
        text: document.getElementById("text").value,
        date: Date.now()
      };

      // Envoi de l'objet msg à travers une chaîne formatée en JSON
      exampleSocket.send(JSON.stringify(msg));
      
      // Efface le texte de l'élément input
      // afin de recevoir la prochaine ligne de texte 
      // que l'utilisateur va saisir
      document.getElementById("text").value = "";
    } 
    </script>
   </body>
</html>